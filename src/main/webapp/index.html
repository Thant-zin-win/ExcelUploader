<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Excel Files Uploader System</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
<link rel="stylesheet" href="/ExcelUploader/css/styles.css">
<link rel="icon" type="image/png" href="/ExcelUploader/favicon3.png">
</head>
<body>
<script>
    fetch('/ExcelUploader/checkLogin')
        .then(response => response.json())
        .then(data => {
            if (!data.loggedIn) {
                window.location.href = 'login.html';
            }
        })
        .catch(error => {
            window.location.href = 'login.html';
        });
</script>

<div class="app-container">
    <!-- Navbar: Removed Logout button here -->
    <nav class="navbar navbar-expand-lg navbar-light">
        <div class="container-fluid">
            <a class="navbar-brand d-flex align-items-center" href="index.html">
                <img src="/ExcelUploader/favicon3.png" class="mt-1 mx-2" width="20" height="20">
                <span class="fw-bold fs-5">Excel Files Uploader System</span>
            </a>
            <div class="d-flex align-items-center">
                <!-- Username shown on navbar if desired -->
                <span id="loggedInUserName" class="me-2 text-dark fw-bold"></span>
                <div class="dropdown">
                    <button class="btn btn-sm btn-icon-round dropdown-toggle" type="button" id="userDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                        <i class="bi bi-person-circle fs-5"></i>
                    </button>
                    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userDropdown">
                        <li><a class="dropdown-item" href="#">Change Password (Coming Soon)</a></li>
                    </ul>
                </div>
                <!-- LOGOUT REMOVED FROM NAVBAR! -->
            </div>
        </div>
    </nav>
    <!-- Main Content -->
    <div class="container-fluid mt-3 flex-grow-1 d-flex align-items-start main-body-flex">
        <!-- Left Sidebar with nav and footer/logout -->
        <nav class="col-md-2 sidebar-nav d-flex flex-column">
            <ul class="nav flex-column flex-grow-1">
                <li class="nav-item">
                    <button class="nav-link-btn active" data-target="recentFiles">
                        <i class="bi bi-clock-history"></i> Recently Uploaded
                    </button>
                </li>
                <li class="nav-item">
                    <button class="nav-link-btn" data-target="upload">
                        <i class="bi bi-cloud-arrow-up"></i> Upload Files
                    </button>
                </li>
                <li class="nav-item">
                    <button class="nav-link-btn" data-target="view">
                        <i class="bi bi-file-earmark-spreadsheet"></i> View Data
                    </button>
                </li>
                <li class="nav-item">
                    <button class="nav-link-btn" data-target="download">
                        <i class="bi bi-download"></i> Download Files
                    </button>
                </li>
                <li class="nav-item">
                    <button class="nav-link-btn" data-target="manage">
                        <i class="bi bi-pencil-square"></i> Manage Categories
                    </button>
                </li>
                <li class="nav-item">
                    <button class="nav-link-btn" data-target="delete">
                        <i class="bi bi-trash"></i> Delete Entries
                    </button>
                </li>
            </ul>
            <!-- SIDEBAR FOOTER - LOGOUT BUTTON -->
            <div class="sidebar-footer mt-auto w-100">
                <a href="/ExcelUploader/logout" class="logout-btn w-100" tabindex="0" role="button">
                    <i class="bi bi-box-arrow-right me-2"></i>
                    Logout
                </a>
            </div>
        </nav>
        <!-- Right Main Content Panel -->
        <div class="col-md-10 main-content-panel">
            <div id="dynamicContent" class="content-wrapper">
                <p class="text-center">Loading content...</p>
            </div>
        </div>
    </div>
</div>
<!-- Modal for displaying messages -->
<div id="modal" class="modal">
    <div id="modal-content" class="modal-content"></div>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="/ExcelUploader/js/script.js"></script>
</body>
</html>